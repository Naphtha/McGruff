<!DOCTYPE html>
<meta charset="utf-8">

<!-- The majority of this code was pulled from this D3 Tutorial: http://bost.ocks.org/mike/bar/2/ -->
<!-- It was heavily adapted to work with the json objects and timestamp -->
<style>
.chart rect {
  fill: steelblue;
}

.chart text {
  fill: black;
  font: 10px sans-serif;
  text-anchor: end;
}



</style>

<svg class="chart"></svg>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://code.jquery.com/jquery-1.11.2.min.js" charset="utf-8"></script>

<script>


var width = 300,
    barHeight = 15;

var x = d3.time.scale().range([0,width]);
  
var chart = d3.select(".chart").attr("width", width);

var format = d3.time.format("%H:%M");

// had to get rid of several elements in the json object
// propogate new format down
// remove date and make it simple list of activities


d3.json("log.json", function(data){

//console.log(data);

data = data.Dec312014[0];

//data = JSON.parse( data );

x.domain([d3.min(data, function(d){ return format.parse(d.time); }), d3.max(data, function(d){ return format.parse(d.time); })]);

chart.attr("height", barHeight * data.length);

var bar = chart.selectAll("g").data(data).enter().append("g").attr("transform", function(d,i){ return "translate(0," + i * barHeight + ")";});

bar.append("rect").attr("width", function(d){ return x(format.parse(d.time)); }).attr("height", barHeight - 1);

bar.append("text").attr("x", width)
  .attr("y", barHeight - 5)
  .attr("dy", ".35em")
  .text(function(d){ return d.activity });

});

function type(d){
  d.value = +d.value;
  return d;
}


</script>

<div>
  This chart displays a bar with a height corresponding to the time of day the crime was reported. The labels are the type of crime committed. The majority of this code was pulled directly from a D3 tutorial by Mike Bostock. It was heavily adapted to work with timestamps and imported JSON data from my parsing script.
</div>




